<!DOCTYPE html>
<html>
<head>
  <title>AR.js with Three.js</title>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      font-family: Arial, sans-serif;
    }
  </style>
</head>
<body>
  <a-scene embedded arjs="trackingMethod: best; sourceType: webcam;">
    <a-assets>
      <a-asset-item id="hatModel" src="https://nicolascumbej.github.io/arexperience/tmp2h0xvw1a.obj"></a-asset-item>
    </a-assets>
    <a-marker preset="hiro">
      <a-entity id="hat" obj-model="obj: #hatModel" scale="0.1 0.1 0.1" position="0 0 0" rotation="0 0 0"></a-entity>
    </a-marker>
    <a-entity camera></a-entity>
  </a-scene>
  <script>
    // Agregar mensajes de depuración
    AFRAME.registerComponent('log', {
      schema: { type: 'string' },
      init: function () {
        console.log(this.data);
      }
    });

    // Verificar si el modelo se carga correctamente
    document.querySelector('#hat').addEventListener('model-loaded', function () {
      console.log('Modelo cargado correctamente');
    });

    document.querySelector('a-assets').addEventListener('loaded', function () {
      console.log('Todos los assets han sido cargados');
    });

    document.querySelector('a-scene').addEventListener('loaded', function () {
      console.log('Escena cargada');
    });

    // Mensaje de depuración al detectar el marcador
    document.querySelector('a-marker').addEventListener('markerFound', function () {
      console.log('Marcador encontrado');
    });

    document.querySelector('a-marker').addEventListener('markerLost', function () {
      console.log('Marcador perdido');
    });

    // Verificar la posición del modelo
    document.querySelector('a-marker').addEventListener('markerFound', function () {
      const hat = document.querySelector('#hat');
      if (hat) {
        console.log('Posición del modelo:', hat.getAttribute('position'));
        console.log('Rotación del modelo:', hat.getAttribute('rotation'));
        console.log('Escala del modelo:', hat.getAttribute('scale'));
      }
    });
  </script>
</body>
</html>
